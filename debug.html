<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>调试页面 - 冒险模拟器</title>
    <link rel="stylesheet" href="assets/styles/main.css">
    <link rel="stylesheet" href="assets/styles/components.css">
</head>
<body>
    <div id="app">
        <header class="game-header">
            <h1>🎮 冒险模拟器</h1>
            <p class="subtitle">调试模式</p>
        </header>

        <div class="control-panel">
            <div class="control-group">
                <button id="new-game-btn" class="btn btn-primary">🎮 新游戏</button>
                <button id="test-btn" class="btn btn-secondary">🧪 测试</button>
            </div>
        </div>

        <div class="game-content">
            <div id="debug-log" style="background: #000; color: #0f0; padding: 20px; font-family: monospace; height: 300px; overflow-y: auto; border: 1px solid #0f0;">
                <div>🔧 调试日志:</div>
            </div>
        </div>

        <!-- 角色创建面板 -->
        <div id="character-creation" class="modal hidden">
            <div class="modal-content">
                <h2>创建角色</h2>
                <div class="character-form">
                    <div class="form-group">
                        <label for="character-name">角色名称:</label>
                        <input type="text" id="character-name" placeholder="输入角色名称">
                    </div>
                    
                    <div class="form-group">
                        <label>选择职业:</label>
                        <div class="profession-grid">
                            <div class="profession-card" data-profession="warrior">
                                <div class="profession-icon">⚔️</div>
                                <h3>战士</h3>
                                <p>近战专家，高生命值和防御力</p>
                            </div>
                            <div class="profession-card" data-profession="mage">
                                <div class="profession-icon">🔮</div>
                                <h3>法师</h3>
                                <p>魔法专家，强大的法术攻击</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button id="create-character-btn" class="btn btn-primary">创建角色</button>
                        <button id="cancel-creation-btn" class="btn btn-secondary">取消</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 调试日志函数
        function debugLog(message) {
            const logDiv = document.getElementById('debug-log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        // 页面加载完成
        document.addEventListener('DOMContentLoaded', function() {
            debugLog('📄 DOM加载完成');
            
            // 新游戏按钮
            const newGameBtn = document.getElementById('new-game-btn');
            if (newGameBtn) {
                debugLog('✅ 找到新游戏按钮');
                
                newGameBtn.addEventListener('click', function() {
                    debugLog('🎮 新游戏按钮被点击');
                    
                    const modal = document.getElementById('character-creation');
                    if (modal) {
                        debugLog('✅ 找到角色创建模态框');
                        modal.classList.remove('hidden');
                        debugLog('✅ 模态框已显示');
                    } else {
                        debugLog('❌ 找不到角色创建模态框');
                    }
                });
            } else {
                debugLog('❌ 找不到新游戏按钮');
            }
            
            // 测试按钮
            const testBtn = document.getElementById('test-btn');
            if (testBtn) {
                testBtn.addEventListener('click', function() {
                    debugLog('🧪 测试按钮被点击');
                    debugLog('📊 当前页面元素统计:');
                    debugLog(`- 按钮数量: ${document.querySelectorAll('button').length}`);
                    debugLog(`- 模态框数量: ${document.querySelectorAll('.modal').length}`);
                    debugLog(`- 隐藏元素数量: ${document.querySelectorAll('.hidden').length}`);
                });
            }
            
            // 取消按钮
            const cancelBtn = document.getElementById('cancel-creation-btn');
            if (cancelBtn) {
                cancelBtn.addEventListener('click', function() {
                    debugLog('❌ 取消创建角色');
                    const modal = document.getElementById('character-creation');
                    if (modal) {
                        modal.classList.add('hidden');
                        debugLog('✅ 模态框已隐藏');
                    }
                });
            }
            
            // 创建角色按钮
            const createBtn = document.getElementById('create-character-btn');
            if (createBtn) {
                createBtn.addEventListener('click', function() {
                    const name = document.getElementById('character-name').value;
                    debugLog(`🎭 创建角色: ${name || '(未命名)'}`);
                    
                    if (!name) {
                        debugLog('⚠️ 请输入角色名称');
                        return;
                    }
                    
                    debugLog('✅ 角色创建成功');
                    const modal = document.getElementById('character-creation');
                    if (modal) {
                        modal.classList.add('hidden');
                    }
                });
            }
            
            debugLog('🔧 调试页面初始化完成');
        });

        // 全局错误处理
        window.addEventListener('error', function(e) {
            debugLog(`🚨 JavaScript错误: ${e.message}`);
            debugLog(`📁 文件: ${e.filename}`);
            debugLog(`📍 行号: ${e.lineno}:${e.colno}`);
        });

        debugLog('🔧 调试脚本加载完成');
    </script>
</body>
</html>
