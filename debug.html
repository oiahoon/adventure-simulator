<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è°ƒè¯•é¡µé¢ - å†’é™©æ¨¡æ‹Ÿå™¨</title>
    <link rel="stylesheet" href="assets/styles/main.css">
    <link rel="stylesheet" href="assets/styles/components.css">
</head>
<body>
    <div id="app">
        <header class="game-header">
            <h1>ğŸ® å†’é™©æ¨¡æ‹Ÿå™¨</h1>
            <p class="subtitle">è°ƒè¯•æ¨¡å¼</p>
        </header>

        <div class="control-panel">
            <div class="control-group">
                <button id="new-game-btn" class="btn btn-primary">ğŸ® æ–°æ¸¸æˆ</button>
                <button id="test-btn" class="btn btn-secondary">ğŸ§ª æµ‹è¯•</button>
            </div>
        </div>

        <div class="game-content">
            <div id="debug-log" style="background: #000; color: #0f0; padding: 20px; font-family: monospace; height: 300px; overflow-y: auto; border: 1px solid #0f0;">
                <div>ğŸ”§ è°ƒè¯•æ—¥å¿—:</div>
            </div>
        </div>

        <!-- è§’è‰²åˆ›å»ºé¢æ¿ -->
        <div id="character-creation" class="modal hidden">
            <div class="modal-content">
                <h2>åˆ›å»ºè§’è‰²</h2>
                <div class="character-form">
                    <div class="form-group">
                        <label for="character-name">è§’è‰²åç§°:</label>
                        <input type="text" id="character-name" placeholder="è¾“å…¥è§’è‰²åç§°">
                    </div>
                    
                    <div class="form-group">
                        <label>é€‰æ‹©èŒä¸š:</label>
                        <div class="profession-grid">
                            <div class="profession-card" data-profession="warrior">
                                <div class="profession-icon">âš”ï¸</div>
                                <h3>æˆ˜å£«</h3>
                                <p>è¿‘æˆ˜ä¸“å®¶ï¼Œé«˜ç”Ÿå‘½å€¼å’Œé˜²å¾¡åŠ›</p>
                            </div>
                            <div class="profession-card" data-profession="mage">
                                <div class="profession-icon">ğŸ”®</div>
                                <h3>æ³•å¸ˆ</h3>
                                <p>é­”æ³•ä¸“å®¶ï¼Œå¼ºå¤§çš„æ³•æœ¯æ”»å‡»</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button id="create-character-btn" class="btn btn-primary">åˆ›å»ºè§’è‰²</button>
                        <button id="cancel-creation-btn" class="btn btn-secondary">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è°ƒè¯•æ—¥å¿—å‡½æ•°
        function debugLog(message) {
            const logDiv = document.getElementById('debug-log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        // é¡µé¢åŠ è½½å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            debugLog('ğŸ“„ DOMåŠ è½½å®Œæˆ');
            
            // æ–°æ¸¸æˆæŒ‰é’®
            const newGameBtn = document.getElementById('new-game-btn');
            if (newGameBtn) {
                debugLog('âœ… æ‰¾åˆ°æ–°æ¸¸æˆæŒ‰é’®');
                
                newGameBtn.addEventListener('click', function() {
                    debugLog('ğŸ® æ–°æ¸¸æˆæŒ‰é’®è¢«ç‚¹å‡»');
                    
                    const modal = document.getElementById('character-creation');
                    if (modal) {
                        debugLog('âœ… æ‰¾åˆ°è§’è‰²åˆ›å»ºæ¨¡æ€æ¡†');
                        modal.classList.remove('hidden');
                        debugLog('âœ… æ¨¡æ€æ¡†å·²æ˜¾ç¤º');
                    } else {
                        debugLog('âŒ æ‰¾ä¸åˆ°è§’è‰²åˆ›å»ºæ¨¡æ€æ¡†');
                    }
                });
            } else {
                debugLog('âŒ æ‰¾ä¸åˆ°æ–°æ¸¸æˆæŒ‰é’®');
            }
            
            // æµ‹è¯•æŒ‰é’®
            const testBtn = document.getElementById('test-btn');
            if (testBtn) {
                testBtn.addEventListener('click', function() {
                    debugLog('ğŸ§ª æµ‹è¯•æŒ‰é’®è¢«ç‚¹å‡»');
                    debugLog('ğŸ“Š å½“å‰é¡µé¢å…ƒç´ ç»Ÿè®¡:');
                    debugLog(`- æŒ‰é’®æ•°é‡: ${document.querySelectorAll('button').length}`);
                    debugLog(`- æ¨¡æ€æ¡†æ•°é‡: ${document.querySelectorAll('.modal').length}`);
                    debugLog(`- éšè—å…ƒç´ æ•°é‡: ${document.querySelectorAll('.hidden').length}`);
                });
            }
            
            // å–æ¶ˆæŒ‰é’®
            const cancelBtn = document.getElementById('cancel-creation-btn');
            if (cancelBtn) {
                cancelBtn.addEventListener('click', function() {
                    debugLog('âŒ å–æ¶ˆåˆ›å»ºè§’è‰²');
                    const modal = document.getElementById('character-creation');
                    if (modal) {
                        modal.classList.add('hidden');
                        debugLog('âœ… æ¨¡æ€æ¡†å·²éšè—');
                    }
                });
            }
            
            // åˆ›å»ºè§’è‰²æŒ‰é’®
            const createBtn = document.getElementById('create-character-btn');
            if (createBtn) {
                createBtn.addEventListener('click', function() {
                    const name = document.getElementById('character-name').value;
                    debugLog(`ğŸ­ åˆ›å»ºè§’è‰²: ${name || '(æœªå‘½å)'}`);
                    
                    if (!name) {
                        debugLog('âš ï¸ è¯·è¾“å…¥è§’è‰²åç§°');
                        return;
                    }
                    
                    debugLog('âœ… è§’è‰²åˆ›å»ºæˆåŠŸ');
                    const modal = document.getElementById('character-creation');
                    if (modal) {
                        modal.classList.add('hidden');
                    }
                });
            }
            
            debugLog('ğŸ”§ è°ƒè¯•é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        });

        // å…¨å±€é”™è¯¯å¤„ç†
        window.addEventListener('error', function(e) {
            debugLog(`ğŸš¨ JavaScripté”™è¯¯: ${e.message}`);
            debugLog(`ğŸ“ æ–‡ä»¶: ${e.filename}`);
            debugLog(`ğŸ“ è¡Œå·: ${e.lineno}:${e.colno}`);
        });

        debugLog('ğŸ”§ è°ƒè¯•è„šæœ¬åŠ è½½å®Œæˆ');
    </script>
</body>
</html>
